#
# docker build -t mp2-common-2022 .
# docker run -it --rm -p 8080:8080 mp2-common-2022
#

# compile and create distributable with gradle
FROM docker.io/gradle:7.4.2-jdk17 AS build-env
USER root
WORKDIR /sportgh
COPY . ./
RUN gradle --no-daemon bootJar -x check

# copy the runnable JAR file to the JRE image
FROM docker.io/openjdk:17.0.1-jdk-slim
WORKDIR /sportgh
COPY --from=build-env /sportgh/build/libs/*.jar ./
EXPOSE 8080
CMD java $JAVA_OPTS -jar *.jar
